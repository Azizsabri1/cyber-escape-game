<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Salle 4</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
 <%- include('partials/header') %>
  <main>
    <section class="card">
      <h2>Salle 4 â€“ La BibliothÃ¨que Interdite</h2>
      <p>
        Tu peux chercher un grimoire par son titre. Le backend construit
        une requÃªte SQL avec ta saisieâ€¦ en concatÃ©nant la chaÃ®ne.
      </p>

      <details>
        <summary>ğŸ’¡ Indice 1</summary>
        <p class="hint">
          Cherche un titre normal, par exemple <code>Ombres</code>, puis
          regarde la requÃªte exÃ©cutÃ©e.
        </p>
      </details>

      <details>
        <summary>ğŸ’¡ Indice 2 (technique)</summary>
        <p class="hint">
          La requÃªte ressemble Ã 
          <code>... WHERE title LIKE '%<em>ta_saisie</em>%'</code>.
          Si tu ajoutes <code>' OR 1=1 --</code>, la condition devient
          toujours vraie et tu peux lister tous les livres.
        </p>
      </details>

      <details>
        <summary>ğŸ“˜ Explication de la faille</summary>
        <p class="hint">
          C'est une <strong>injection SQL</strong> classique : la saisie
          utilisateur est collÃ©e directement dans la requÃªte sans paramÃ©trage.
          Un attaquant peut manipuler la logique SQL pour lire plus de donnÃ©es
          que prÃ©vu, voire modifier / supprimer des enregistrements.
        </p>
        <p class="hint">
          <strong>Correctif :</strong> utiliser des requÃªtes prÃ©parÃ©es
          (paramÃ¨tres <code>?</code>, <code>$1</code>, etc.), ne jamais
          concatÃ©ner directement la saisie dans la chaÃ®ne SQL, et limiter
          les comptes DB (principe du moindre privilÃ¨ge).
        </p>
      </details>
    </section>

    <section class="card">
      <h3>Recherche</h3>
      <form method="get" action="/room4/search">
        <label for="q">Mot-clÃ© dans le titre :</label>
        <input type="text" id="q" name="q" placeholder="' OR 1=1 --">
        <button type="submit">Chercher</button>
      </form>
    </section>
  </main>
<%- include('partials/footer') %>
</body>
</html>
