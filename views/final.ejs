<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Salle Finale</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
 <%- include('partials/header') %>
  <main>
    <% if (locked) { %>
      <section class="card">
        <h2>Salle Finale ‚Äì Porte ferm√©e</h2>
        <p>Il reste des salles √† vaincre avant d'entrer dans la tour :</p>
        <ul>
          <li>Salle 1 : <%= game.room1Done ? '‚úÖ' : '‚ùå' %></li>
          <li>Salle 2 : <%= game.room2Done ? '‚úÖ' : '‚ùå' %></li>
          <li>Salle 3 : <%= game.room3Done ? '‚úÖ' : '‚ùå' %></li>
          <li>Salle 4 : <%= game.room4Done ? '‚úÖ' : '‚ùå' %></li>
          <li>Salle 5 : <%= game.room5Done ? '‚úÖ' : '‚ùå' %></li>
        </ul>
        <p><a href="/">Retour au hall</a></p>
      </section>
    <% } else { %>
      <section class="card">
        <h2>Salle Finale ‚Äì La Tour du Gardien</h2>
        <p>üéâ F√©licitations ! Tu as exploit√© avec succ√®s :</p>
        <ul>
          <li>
            <strong>Salle 1 ‚Äì Config / JSON Injection</strong><br>
            <span class="hint">
              Fusion na√Øve <code>Object.assign</code> avec des donn√©es utilisateur,
              permettant d'√©craser <code>isAdmin</code> et autres champs sensibles.
            </span>
          </li>
          <li>
            <strong>Salle 2 ‚Äì XSS DOM</strong><br>
            <span class="hint">
              Utilisation de <code>innerHTML</code> sans √©chappement, autorisant
              l'injection de JavaScript c√¥t√© navigateur.
            </span>
          </li>
          <li>
            <strong>Salle 3 ‚Äì JWT secret faible</strong><br>
            <span class="hint">
              Secret trop court pour signer les tokens JWT, permettant de forger
              un token avec un r√¥le plus √©lev√©.
            </span>
          </li>
          <li>
            <strong>Salle 4 ‚Äì SQL Injection</strong><br>
            <span class="hint">
              Concat√©nation directe de la saisie dans la requ√™te SQL, ce qui permet
              de manipuler la clause <code>WHERE</code>.
            </span>
          </li>
          <li>
            <strong>Salle 5 ‚Äì Path Traversal / File Disclosure</strong><br>
            <span class="hint">
              Construction d'un chemin de fichier avec des donn√©es utilisateur, sans
              filtrer <code>../</code>, permettant de lire des fichiers en dehors
              du dossier pr√©vu.
            </span>
          </li>
        </ul>
        <p>
          Tu peux maintenant utiliser ce jeu comme d√©monstration dans ton rapport :
          chaque salle = une vuln√©rabilit√©, un sc√©nario d'attaque et un correctif.
        </p>
      </section>
    <% } %>
  </main>
 <%- include('partials/footer') %>
</body>
</html>
